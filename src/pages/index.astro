---
export const prerender = true;

import Layout from "../layouts/Layout.astro";
import LanguageSwitcher from "../components/LanguageSwitcher.astro";
import { profile } from "../config/profile";
import { getTranslations, defaultLanguage } from "../i18n/utils";

type Language = "en" | "pt" | "fr";

// For static generation, use default language at build time
// Client-side script will handle language switching
const lang: Language = defaultLanguage;
const t = getTranslations(lang);

// Helper to translate months and "Present" in period strings
function translatePeriod(period: string, months: typeof t.months, present: string): string {
  let translated = period.replace(/\b(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\b/g, (match) => {
    return months[match as keyof typeof months] || match;
  });
  translated = translated.replace(/\bPresent\b/g, present);
  return translated;
}
---

<Layout lang={lang}>
  <!-- Sticky Header with Profile, Search, and Links -->
  <header class="sticky top-0 z-50 bg-[var(--color-bg)] border-b border-[var(--color-border)] backdrop-blur-sm bg-opacity-90">
    <div class="max-w-2xl mx-auto px-6 py-4">
      <div class="flex flex-col sm:flex-row items-start gap-3 sm:gap-4 mb-4">
        <div class="flex items-start gap-3 sm:gap-4 flex-1 min-w-0 w-full sm:w-auto">
          <img 
            src={profile.photo}
            alt={profile.name}
            class="w-12 h-12 rounded-full object-cover flex-shrink-0"
          />
          <div class="flex-1 min-w-0">
            <h1 class="text-lg font-semibold tracking-tight mb-0.5 truncate">{profile.name}</h1>
            <p class="text-sm text-[var(--color-text-muted)]" data-i18n="title">{t.title}</p>
          </div>
        </div>
        <LanguageSwitcher currentLang={lang} />
      </div>
      
      <div class="mb-3 relative">
        <div class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none">
          <svg class="w-4 h-4 text-[var(--color-text-muted)]" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </div>
        <input
          type="text"
          id="skills-search"
          data-i18n="skillsSearch"
          data-i18n-mobile="skillsSearchMobile"
          placeholder={t.skillsSearch}
          class="w-full pl-9 pr-2.5 sm:pr-3 py-2.5 text-xs sm:text-sm rounded-lg border-2 border-[var(--color-text-secondary)] bg-[var(--color-bg-subtle)] text-[var(--color-text)] placeholder-[var(--color-text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--color-text-secondary)] focus:border-[var(--color-text)] transition-all shadow-sm"
        />
      </div>
      
      <nav class="flex flex-wrap gap-x-4 gap-y-2 text-xs text-[var(--color-text-secondary)]">
        <a href={`mailto:${profile.contact.email}`} class="link inline-flex items-center gap-1.5">
          <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
          </svg>
          <span class="hidden sm:inline">{profile.contact.email}</span>
          <span class="sm:hidden">Email</span>
        </a>
        <a href={profile.contact.whatsapp} target="_blank" rel="noopener" class="link inline-flex items-center gap-1.5">
          <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
          </svg>
          WhatsApp
        </a>
        <a href={profile.social.linkedin} target="_blank" rel="noopener" class="link inline-flex items-center gap-1.5">
          <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
          </svg>
          LinkedIn
        </a>
        <a href={profile.social.github} target="_blank" rel="noopener" class="link inline-flex items-center gap-1.5">
          <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
          </svg>
          GitHub
        </a>
        <a href={lang === "pt" ? "/cvs/Jose_Figueiroa_CV.pdf" : lang === "fr" ? "/cvs/Jose_Figueiroa_CV__FR_.pdf" : "/cvs/Jose_Figueiroa_CV__EN_.pdf"} target="_blank" rel="noopener" class="link inline-flex items-center gap-1.5">
          <span data-i18n="cvDownload">{t.cvDownload}</span>
        </a>
      </nav>
    </div>
  </header>

  <main class="max-w-2xl mx-auto px-6 py-16 md:py-24">

    <!-- About -->
    <section class="mb-14">
      <p class="text-[var(--color-text-secondary)] leading-relaxed" data-i18n="about">{t.about}</p>
    </section>

    <!-- Experience -->
    <section id="experience" class="mb-14 details-section">
      <details open class="group">
        <summary class="cursor-pointer list-none">
          <h2 class="section-title inline" data-i18n="sections.experience">{t.sections.experience}</h2>
          <span class="ml-2 text-[var(--color-text-muted)] text-xs collapse-icon">â–¼</span>
          <span class="ml-2 text-[var(--color-text-muted)] text-xs expand-icon">â–¶</span>
        </summary>
        <div class="mt-4">
      
      <div class="space-y-10">
        {profile.experience.map((job, idx) => {
          const expKey = idx === 0 ? "jusfy" : idx === 1 ? "beyond" : idx === 2 ? "navalport1" : idx === 3 ? "ausy" : idx === 4 ? "navalport2" : "navalport3";
          const expT = t.experience[expKey as keyof typeof t.experience];
          return (
            <article>
              <div class="flex flex-wrap items-baseline justify-between gap-x-4 mb-2">
                <h3 class="font-medium">
                  <span data-i18n={`experience.${expKey}.role`}>{expT.role}</span>{"type" in expT && expT.type && <span data-i18n={`experience.${expKey}.type`}> ({expT.type})</span>} Â· <a href={job.url} target="_blank" rel="noopener" class="link">{job.company}</a>
                </h3>
                <span class="text-sm text-[var(--color-text-muted)]">{translatePeriod(job.period, t.months, t.present)}</span>
              </div>
              
              <ul class="space-y-1.5 text-sm text-[var(--color-text-secondary)] mb-3">
                {expT.highlights.map((h, hIdx) => (
                  <li class="pl-4 relative before:content-['â€”'] before:absolute before:left-0 before:text-[var(--color-text-muted)]" data-i18n={`experience.${expKey}.highlights.${hIdx}`}>{h}</li>
                ))}
              </ul>
              
              <p class="text-xs text-[var(--color-text-muted)]">
                {job.technologies.join(" Â· ")}
              </p>
            </article>
          );
        })}
      </div>
        </div>
      </details>
    </section>

    <!-- Projects -->
    <section id="projects" class="mb-14 details-section">
      <details open class="group">
        <summary class="cursor-pointer list-none">
          <h2 class="section-title inline" data-i18n="sections.projects">{t.sections.projects}</h2>
          <span class="ml-2 text-[var(--color-text-muted)] text-xs collapse-icon">â–¼</span>
          <span class="ml-2 text-[var(--color-text-muted)] text-xs expand-icon">â–¶</span>
        </summary>
        <div class="mt-4">
      
      {profile.projects.map((project) => {
        const projT = t.projects.cargosight;
        return (
          <article>
            <div class="flex flex-wrap items-baseline gap-x-3 mb-2">
              <h3 class="font-medium">{project.name}</h3>
              <span class="text-sm text-[var(--color-text-muted)]">{project.client}</span>
            </div>
            
            <p class="text-sm text-[var(--color-text-secondary)] mb-3" data-i18n="projects.cargosight.description">{projT.description}</p>
            
            <ul class="space-y-1.5 text-sm text-[var(--color-text-secondary)] mb-3">
              {projT.highlights.map((h, hIdx) => (
                <li class="pl-4 relative before:content-['â€”'] before:absolute before:left-0 before:text-[var(--color-text-muted)]" data-i18n={`projects.cargosight.highlights.${hIdx}`}>{h}</li>
              ))}
            </ul>
            
            <p class="text-xs text-[var(--color-text-muted)]">
              {project.technologies.join(" Â· ")}
            </p>
          </article>
        );
      })}
        </div>
      </details>
    </section>

    <!-- Education -->
    <section id="education" class="mb-14 details-section">
      <details open class="group">
        <summary class="cursor-pointer list-none">
          <h2 class="section-title inline" data-i18n="sections.education">{t.sections.education}</h2>
          <span class="ml-2 text-[var(--color-text-muted)] text-xs collapse-icon">â–¼</span>
          <span class="ml-2 text-[var(--color-text-muted)] text-xs expand-icon">â–¶</span>
        </summary>
        <div class="mt-4">
      
      <div class="space-y-6">
        {profile.education.map((edu, idx) => {
          const eduKey = idx === 0 ? "master" : "bachelor";
          const eduT = t.education[eduKey as keyof typeof t.education];
          return (
            <article>
              <div class="flex flex-wrap items-baseline justify-between gap-x-4 mb-1">
                <h3 class="font-medium" data-i18n={`education.${eduKey}.degree`}>{eduT.degree}</h3>
                {"gpa" in edu && edu.gpa && <span class="text-sm text-[var(--color-text-muted)]">GPA {edu.gpa}</span>}
              </div>
              <p class="text-sm text-[var(--color-text-secondary)] mb-2">
                <a href={edu.url} target="_blank" rel="noopener" class="link">
                  {t.institutions[edu.institution as keyof typeof t.institutions] || edu.institution}
                </a>
              </p>
              <ul class="space-y-1 text-sm text-[var(--color-text-muted)]">
                {eduT.highlights.map((h, hIdx) => (
                  <li data-i18n={`education.${eduKey}.highlights.${hIdx}`}>{h}</li>
                ))}
              </ul>
            </article>
          );
        })}
      </div>
        </div>
      </details>
    </section>

    <!-- Skills -->
    <section id="skills" class="mb-14 details-section">
      <details open class="group">
        <summary class="cursor-pointer list-none">
          <h2 class="section-title inline" data-i18n="sections.skills">{t.sections.skills}</h2>
          <span class="ml-2 text-[var(--color-text-muted)] text-xs collapse-icon">â–¼</span>
          <span class="ml-2 text-[var(--color-text-muted)] text-xs expand-icon">â–¶</span>
        </summary>
        <div class="mt-4">
          <div id="skills-container" class="flex flex-wrap gap-2">
            {profile.skills.map((skill) => {
              const skillName = typeof skill === "string" ? skill : skill.name;
              const years = typeof skill === "string" ? null : skill.years;
              const keywords = typeof skill === "string" ? [skillName.toLowerCase()] : (skill.keywords || [skillName.toLowerCase()]);
              const yearsText = years !== null && years > 0 ? `${years}${years === 1 ? "yr" : "yrs"}` : "";
              return (
                <span 
                  class="skill-badge inline-flex items-center gap-1.5 px-2.5 py-1 text-xs rounded-md bg-[var(--color-bg-subtle)] text-[var(--color-text-secondary)] border border-[var(--color-border)]"
                  data-skill-name={skillName.toLowerCase()}
                  data-skill-keywords={keywords.join(" ")}
                >
                  <span>{skillName}</span>
                  {yearsText && <span class="text-[var(--color-text-muted)]">({yearsText})</span>}
                </span>
              );
            })}
          </div>
          <div id="skills-no-results" class="mt-4 p-3 text-sm text-[var(--color-text-secondary)] bg-[var(--color-bg-subtle)] border border-[var(--color-border)] rounded-md" data-i18n="skillsSearchNoResults">
            {t.skillsSearchNoResults}
          </div>
        </div>
      </details>
    </section>

    <!-- Languages -->
    <section id="languages" class="mb-14 details-section">
      <details open class="group">
        <summary class="cursor-pointer list-none">
          <h2 class="section-title inline" data-i18n="sections.languages">{t.sections.languages}</h2>
          <span class="ml-2 text-[var(--color-text-muted)] text-xs collapse-icon">â–¼</span>
          <span class="ml-2 text-[var(--color-text-muted)] text-xs expand-icon">â–¶</span>
        </summary>
        <div class="mt-4">
          <p class="text-sm text-[var(--color-text-secondary)]">
            {profile.languages.map((l) => {
              const translatedName = t.languageNames[l.name as keyof typeof t.languageNames] || l.name;
              const translatedLevel = t.languageLevels[l.level as keyof typeof t.languageLevels] || l.level;
              return `${translatedName} (${translatedLevel})`;
            }).join(" Â· ")}
          </p>
        </div>
      </details>
    </section>

    <!-- Interests -->
    <section id="interests" class="mb-14 details-section">
      <details open class="group">
        <summary class="cursor-pointer list-none">
          <h2 class="section-title inline" data-i18n="sections.interests">{t.sections.interests}</h2>
          <span class="ml-2 text-[var(--color-text-muted)] text-xs collapse-icon">â–¼</span>
          <span class="ml-2 text-[var(--color-text-muted)] text-xs expand-icon">â–¶</span>
        </summary>
        <div class="mt-4">
          <ul class="space-y-1.5 text-sm text-[var(--color-text-secondary)]">
            {t.interests.items.map((item, itemIdx) => (
              <li class="pl-4 relative before:content-['â€”'] before:absolute before:left-0 before:text-[var(--color-text-muted)]" data-i18n={`interests.items.${itemIdx}`}>
                {item}
              </li>
            ))}
          </ul>
        </div>
      </details>
    </section>

    <!-- Footer -->
    <footer class="pt-8 border-t border-[var(--color-border)]">
      <p class="text-xs text-[var(--color-text-muted)] text-center tracking-wide" data-i18n="location">
        {t.location}
      </p>
    </footer>
    
  </main>
</Layout>

<script is:inline>
  // Embed translations
  const translations = {
    en: { title: "Senior Software Engineer", about: "Senior software engineer with solid experience in backend development and strong fullstack capability â€” including cloud infrastructure and frontend interfaces. Fast learner with excellent technical skills.", sections: { experience: "Experience", projects: "Projects", education: "Education", skills: "Skills", languages: "Languages", interests: "Interests" }, skillsSearch: "Hey HR, want to check if I know a specific tech? Search here.", skillsSearchMobile: "Search for a tech...", skillsSearchNoResults: "Didn't find the tech you were looking for? Check my LinkedIn, my rÃ©sumÃ©, or send me a message â€” I may have forgotten to list it here.", cvDownload: "Resume", location: "Recife, Brazil", months: { Jan: "Jan", Feb: "Feb", Mar: "Mar", Apr: "Apr", May: "May", Jun: "Jun", Jul: "Jul", Aug: "Aug", Sep: "Sep", Oct: "Oct", Nov: "Nov", Dec: "Dec" }, present: "Present", institutions: { "Federal University of Pernambuco": "Federal University of Pernambuco", "Polytech CÃ´te D'Azur": "Polytech CÃ´te D'Azur" }, languageNames: { Portuguese: "Portuguese", English: "English", French: "French" }, languageLevels: { Native: "Native", Advanced: "Advanced", Fluent: "Fluent" }, experience: { jusfy: { role: "Senior Software Engineer", highlights: ["Platform squad handling thousands of MAU and DAUs", "Building and scaling lawtech solutions for legal automation"] }, beyond: { role: "Backend Developer", highlights: ["Technical owner of legal automation platform, helping 10x growth in active clients", "Built and maintained legal automation flows with Node.js, Puppeteer and BullMQ, achieving 2,000+ daily runs", "Fixed critical failures increasing automation success rate by 10+ percentage points", "Modernized NodeJS codebase, tripling startup speed and improving developer experience", "Implemented observability features (metrics and alerts), reducing incident detection and resolution time"] }, navalport1: { role: "Fullstack Developer", highlights: ["Led development of mooring monitoring system, reducing maneuvering risks and equipment wear", "Built AIS-based vessel tracking system for real-time port operations and logistics", "Developed interactive dashboards with D3.js improving security team efficiency", "Introduced Swagger and AWS SAM, standardizing APIs and implementing Infrastructure as Code"] }, ausy: { role: "IoT Engineer", highlights: ["Consultant at Orange working on Test as a Service platform for SmartTV end-to-end testing", "Proposed architectures, data models and network configurations for existing infrastructure", "Fullstack development with AWS, Angular, Java and Node.js"] }, navalport2: { role: "Fullstack Developer", highlights: ["Developed and deployed software and physical systems for port security and intelligence", "Built vessel arrival detection using AIS, mooring monitoring, and maneuver planning features"] }, navalport3: { role: "Fullstack Developer", type: "Internship", highlights: ["Backend and frontend development for port management systems"] } }, projects: { cargosight: { description: "B2B SaaS using computer vision to monitor industrial areas and detect operational risks in real time â€” missing PPE, hazardous zones, suspended load movement.", highlights: ["Won 2nd place in University of Pernambuco's innovation program", "Validated PoC at Gerdau's steel plant, later sold to two ports", "Integrated IP cameras, CNNs, and IoT layers for automated alerts"] } }, education: { master: { degree: "Master's in Computer Engineering", highlights: ["Exchange Program", "Research on Simulation and Testing for Autonomous Vehicles with Inria"] }, bachelor: { degree: "Bachelor's in Computer Engineering", highlights: ["Teaching Assistant in Logic and Computation Theory", "Scientific Research in Logic"] } }, interests: { title: "Personal Interests", items: ["Languages and linguistics", "Theology (Reformed Christian)", "Jiu Jitsu (Blue Belt), Boxing and Judo", "Favorite game: Dark Souls", "Culinary arts"] } },
    pt: { title: "Engenheiro de Software SÃªnior", about: "Engenheiro de software sÃªnior com forte experiÃªncia em backend e atuaÃ§Ã£o fullstack â€” incluindo infraestrutura em nuvem e desenvolvimento frontend. Aprendiz rÃ¡pido, com capacidade tÃ©cnica sÃ³lida e foco em resolver problemas reais.", sections: { experience: "ExperiÃªncia", projects: "Projetos", education: "FormaÃ§Ã£o", skills: "Habilidades", languages: "Idiomas", interests: "Interesses" }, skillsSearch: "Ei, RH. Quer saber se eu domino alguma tecnologia? Procure aqui.", skillsSearchMobile: "Busque uma tecnologia...", skillsSearchNoResults: "NÃ£o achou a tecnologia que estÃ¡ procurando? Verifique meu LinkedIn, meu currÃ­culo ou me mande uma mensagem â€” posso ter deixado algo de fora aqui.", cvDownload: "CurrÃ­culo", location: "Recife, Brasil", months: { Jan: "Jan", Feb: "Fev", Mar: "Mar", Apr: "Abr", May: "Mai", Jun: "Jun", Jul: "Jul", Aug: "Ago", Sep: "Set", Oct: "Out", Nov: "Nov", Dec: "Dez" }, present: "Atual", institutions: { "Federal University of Pernambuco": "Universidade Federal de Pernambuco", "Polytech CÃ´te D'Azur": "Polytech CÃ´te D'Azur" }, languageNames: { Portuguese: "PortuguÃªs", English: "InglÃªs", French: "FrancÃªs" }, languageLevels: { Native: "Nativo", Advanced: "AvanÃ§ado", Fluent: "Fluente" }, experience: { jusfy: { role: "Engenheiro de Software SÃªnior", highlights: ["AtuaÃ§Ã£o na squad de plataforma com milhares de MAUs e DAUs", "ConstruÃ§Ã£o e evoluÃ§Ã£o de soluÃ§Ãµes lawtech voltadas para automaÃ§Ã£o jurÃ­dica em escala"] }, beyond: { role: "Desenvolvedor Backend", highlights: ["ResponsÃ¡vel tÃ©cnico da plataforma de automaÃ§Ã£o jurÃ­dica, contribuindo para um crescimento de 10x no nÃºmero de clientes ativos", "Desenvolvi e mantive fluxos de automaÃ§Ã£o com Node.js, Puppeteer e BullMQ, alcanÃ§ando mais de 2.000 execuÃ§Ãµes diÃ¡rias", "Corrigi falhas crÃ­ticas que aumentaram a taxa de sucesso das automaÃ§Ãµes em mais de 10 pontos percentuais", "Modernizei a base Node.js, triplicando o tempo de inicializaÃ§Ã£o e melhorando significativamente a experiÃªncia dos desenvolvedores", "Implementei mÃ©tricas, logs e alertas, reduzindo o tempo de detecÃ§Ã£o e resoluÃ§Ã£o de incidentes"] }, navalport1: { role: "Desenvolvedor Fullstack", highlights: ["Liderei o desenvolvimento do sistema de monitoramento de atracaÃ§Ã£o, reduzindo riscos operacionais e desgaste de equipamentos", "Criei um sistema de rastreamento de embarcaÃ§Ãµes baseado em AIS, otimizando operaÃ§Ãµes portuÃ¡rias e previsibilidade logÃ­stica", "Desenvolvi dashboards interativos com D3.js, aumentando a eficiÃªncia da equipe de seguranÃ§a", "Introduzi Swagger e AWS SAM, padronizando APIs e estabelecendo Infrastructure as Code"] }, ausy: { role: "Engenheiro de IoT", highlights: ["Consultor na Orange trabalhando em uma plataforma de Test as a Service para testes end-to-end de apps SmartTV", "Propus arquiteturas, modelos de dados e configuraÃ§Ãµes de rede alinhadas Ã  infraestrutura existente", "AtuaÃ§Ã£o fullstack com AWS, Angular, Java e Node.js"] }, navalport2: { role: "Desenvolvedor Fullstack", highlights: ["Desenvolvimento e implantaÃ§Ã£o de sistemas de software e hardware para seguranÃ§a e inteligÃªncia portuÃ¡ria", "Funcionalidades incluÃ­am detecÃ§Ã£o de chegada de navios via AIS, monitoramento de atracaÃ§Ã£o e suporte ao planejamento de manobras"] }, navalport3: { role: "Desenvolvedor Fullstack", type: "EstÃ¡gio", highlights: ["Desenvolvimento backend e frontend para sistemas de gestÃ£o portuÃ¡ria"] } }, projects: { cargosight: { description: "SaaS B2B que utiliza visÃ£o computacional para monitoramento de Ã¡reas industriais e detecÃ§Ã£o de riscos operacionais em tempo real â€” como ausÃªncia de EPI, zonas perigosas e movimentaÃ§Ã£o de carga suspensa.", highlights: ["2Âº lugar no programa de inovaÃ§Ã£o da Universidade de Pernambuco", "PoC validada na usina da Gerdau e posteriormente comercializada para dois portos", "IntegraÃ§Ã£o de cÃ¢meras IP, CNNs e camada IoT para geraÃ§Ã£o de alertas automÃ¡ticos"] } }, education: { master: { degree: "Mestrado em Engenharia de ComputaÃ§Ã£o", highlights: ["Programa de intercÃ¢mbio", "Pesquisa em simulaÃ§Ã£o e testes para veÃ­culos autÃ´nomos em parceria com o Inria"] }, bachelor: { degree: "Bacharelado em Engenharia de ComputaÃ§Ã£o", highlights: ["Monitoria em LÃ³gica e Teoria da ComputaÃ§Ã£o", "Pesquisa cientÃ­fica na Ã¡rea de LÃ³gica"] } }, interests: { title: "Interesses Pessoais", items: ["Idiomas e linguÃ­stica", "Teologia (CristÃ£o Reformado)", "Jiu Jitsu (Faixa Azul), Boxe e JudÃ´", "Jogo favorito: Dark Souls", "CulinÃ¡ria"] } },
    fr: { title: "IngÃ©nieur Logiciel Senior", about: "IngÃ©nieur logiciel senior avec une solide expÃ©rience en dÃ©veloppement backend et une forte capacitÃ© fullstack â€” incluant l'infrastructure cloud et le dÃ©veloppement frontend. Apprentissage rapide, grande maÃ®trise technique et forte orientation vers la rÃ©solution de problÃ¨mes concrets.", sections: { experience: "ExpÃ©rience", projects: "Projets", education: "Formation", skills: "CompÃ©tences", languages: "Langues", interests: "Centres d'intÃ©rÃªt" }, skillsSearch: "Bonjour RH, vous souhaitez vÃ©rifier si je maÃ®trise une technologie ? Cherchez ici.", skillsSearchMobile: "Rechercher une technologie...", skillsSearchNoResults: "Vous n'avez pas trouvÃ© la technologie que vous cherchiez ? Consultez mon LinkedIn, mon CV ou envoyez-moi un message â€” j'ai peut-Ãªtre oubliÃ© de l'ajouter ici.", cvDownload: "Curriculum VitÃ¦", location: "Recife, BrÃ©sil", months: { Jan: "Janv", Feb: "FÃ©vr", Mar: "Mars", Apr: "Avr", May: "Mai", Jun: "Juin", Jul: "Juil", Aug: "AoÃ»t", Sep: "Sept", Oct: "Oct", Nov: "Nov", Dec: "DÃ©c" }, present: "PrÃ©sent", institutions: { "Federal University of Pernambuco": "UniversitÃ© FÃ©dÃ©rale de Pernambuco", "Polytech CÃ´te D'Azur": "Polytech CÃ´te D'Azur" }, languageNames: { Portuguese: "Portugais", English: "Anglais", French: "FranÃ§ais" }, languageLevels: { Native: "Natif", Advanced: "AvancÃ©", Fluent: "Courant" }, experience: { jusfy: { role: "IngÃ©nieur Logiciel Senior", highlights: ["Membre de l'Ã©quipe plateforme, gÃ©rant des milliers d'utilisateurs actifs mensuels et quotidiens", "DÃ©veloppement et montÃ©e en charge de solutions lawtech orientÃ©es vers l'automatisation juridique"] }, beyond: { role: "DÃ©veloppeur Backend", highlights: ["Responsable technique de la plateforme d'automatisation juridique, contribuant Ã  une croissance de 10x du nombre de clients actifs", "Conception et maintenance de flux d'automatisation avec Node.js, Puppeteer et BullMQ, atteignant plus de 2 000 exÃ©cutions par jour", "Correction de pannes critiques, augmentant le taux de rÃ©ussite des automatisations de plus de 10 points", "Modernisation de la base Node.js, triplant la vitesse de dÃ©marrage et amÃ©liorant l'expÃ©rience dÃ©veloppeur", "Mise en place de mÃ©triques et d'alertes, rÃ©duisant fortement le temps de dÃ©tection et de rÃ©solution d'incidents"] }, navalport1: { role: "DÃ©veloppeur Fullstack", highlights: ["PilotÃ© le dÃ©veloppement d'un systÃ¨me de surveillance d'amarrage, rÃ©duisant les risques opÃ©rationnels et l'usure d'Ã©quipements essentiels", "CrÃ©Ã© un systÃ¨me de suivi des navires basÃ© sur l'AIS pour optimiser les opÃ©rations portuaires et la logistique", "DÃ©veloppÃ© des tableaux de bord interactifs avec D3.js, amÃ©liorant l'efficacitÃ© de l'Ã©quipe de sÃ©curitÃ©", "Introduit Swagger et AWS SAM, standardisant les API et Ã©tablissant l'Infrastructure as Code"] }, ausy: { role: "IngÃ©nieur IoT", highlights: ["Consultant chez Orange sur une plateforme de Test as a Service pour les tests end-to-end d'applications SmartTV", "Proposition d'architectures, de modÃ¨les de donnÃ©es et de configurations rÃ©seau adaptÃ©es Ã  l'infrastructure existante", "DÃ©veloppement fullstack avec AWS, Angular, Java et Node.js"] }, navalport2: { role: "DÃ©veloppeur Fullstack", highlights: ["DÃ©veloppement et dÃ©ploiement de systÃ¨mes logiciels et matÃ©riels pour la sÃ©curitÃ© et l'intelligence portuaire", "FonctionnalitÃ©s incluant dÃ©tection d'arrivÃ©e des navires via AIS, surveillance d'amarrage et planification des manÅ“uvres"] }, navalport3: { role: "DÃ©veloppeur Fullstack", type: "Stage", highlights: ["DÃ©veloppement backend et frontend pour des systÃ¨mes de gestion portuaire"] } }, projects: { cargosight: { description: "SaaS B2B utilisant la vision par ordinateur pour surveiller des zones industrielles et dÃ©tecter des risques opÃ©rationnels en temps rÃ©el â€” absence d'EPI, zones dangereuses, dÃ©placement de charges suspendues.", highlights: ["2áµ‰ place au programme d'innovation de l'UniversitÃ© de Pernambuco", "PoC validÃ©e dans une usine de Gerdau, puis vendue Ã  deux ports", "IntÃ©gration de camÃ©ras IP, de rÃ©seaux neuronaux (CNN) et de couches IoT pour gÃ©nÃ©rer des alertes automatisÃ©es"] } }, education: { master: { degree: "Master en GÃ©nie Informatique", highlights: ["Programme d'Ã©change international", "Recherche sur la simulation et les tests pour vÃ©hicules autonomes en partenariat avec l'Inria"] }, bachelor: { degree: "Licence en GÃ©nie Informatique", highlights: ["Assistant d'enseignement en Logique et ThÃ©orie de la Computation", "Recherche scientifique dans le domaine de la Logique"] } }, interests: { title: "Centres d'intÃ©rÃªt personnels", items: ["Langues et linguistique", "ThÃ©ologie (ChrÃ©tien rÃ©formÃ©)", "Jiu Jitsu (Ceinture bleue), Boxe et Judo", "Jeu favori : Dark Souls", "Cuisine"] } }
  };
  
  function detectLanguage() {
    const urlParams = new URLSearchParams(window.location.search);
    const queryLang = urlParams.get("lang");
    if (queryLang && (queryLang === "en" || queryLang === "pt" || queryLang === "fr")) {
      localStorage.setItem("lang", queryLang);
      urlParams.delete("lang");
      const newUrl = window.location.pathname + (urlParams.toString() ? `?${urlParams.toString()}` : '');
      window.history.replaceState({}, '', newUrl);
      return queryLang;
    }
    const stored = localStorage.getItem("lang");
    if (stored && (stored === "en" || stored === "pt" || stored === "fr")) return stored;
    const browser = navigator.language.split("-")[0].toLowerCase();
    if (browser === "pt" || browser === "fr") return browser;
    return "en";
  }
  
  function updatePage(lang) {
    const t = translations[lang];
    if (!t) return;
    
    document.querySelectorAll("[data-i18n]").forEach((el) => {
      const key = el.getAttribute("data-i18n");
      if (!key) return;
      const keys = key.split(".");
      let value = t;
      for (const k of keys) {
        value = value?.[k];
      }
      if (value !== undefined) {
        if (el.tagName === "INPUT" && el.type === "text") {
          // Use mobile placeholder if available and on mobile, otherwise use desktop
          const mobileKey = el.getAttribute("data-i18n-mobile");
          const isMobile = window.innerWidth < 640; // sm breakpoint
          if (isMobile && mobileKey) {
            const mobileKeys = mobileKey.split(".");
            let mobileValue = t;
            for (const k of mobileKeys) {
              mobileValue = mobileValue?.[k];
            }
            if (mobileValue !== undefined) {
              el.placeholder = mobileValue;
            } else {
              el.placeholder = value;
            }
          } else {
            el.placeholder = value;
          }
        } else {
          el.textContent = value;
        }
      }
    });
    
    // Update placeholder on window resize
    const skillsSearchInput = document.getElementById("skills-search");
    if (skillsSearchInput) {
      const updatePlaceholder = () => {
        const t = translations[lang];
        if (!t) return;
        const isMobile = window.innerWidth < 640;
        const mobileKey = skillsSearchInput.getAttribute("data-i18n-mobile");
        const desktopKey = skillsSearchInput.getAttribute("data-i18n");
        
        if (isMobile && mobileKey) {
          const mobileKeys = mobileKey.split(".");
          let mobileValue = t;
          for (const k of mobileKeys) {
            mobileValue = mobileValue?.[k];
          }
          if (mobileValue !== undefined) {
            skillsSearchInput.placeholder = mobileValue;
            return;
          }
        }
        
        if (desktopKey) {
          const keys = desktopKey.split(".");
          let value = t;
          for (const k of keys) {
            value = value?.[k];
          }
          if (value !== undefined) {
            skillsSearchInput.placeholder = value;
          }
        }
      };
      
      let resizeTimeout;
      window.addEventListener("resize", () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(updatePlaceholder, 100);
      });
    }
    
    document.documentElement.lang = lang;
    
    // Update CV link based on language
    const cvSpan = document.querySelector('span[data-i18n="cvDownload"]');
    const cvLink = cvSpan?.closest('a');
    if (cvLink) {
      const cvUrls = {
        pt: "/cvs/Jose_Figueiroa_CV.pdf",
        en: "/cvs/Jose_Figueiroa_CV__EN_.pdf",
        fr: "/cvs/Jose_Figueiroa_CV__FR_.pdf"
      };
      cvLink.setAttribute("href", cvUrls[lang] || cvUrls.en);
    }
    
    // Update language switcher active state
    const switcher = document.getElementById("language-switcher");
    if (switcher) {
      switcher.setAttribute("data-current-lang", lang);
      const flags = { en: "ðŸ‡ºðŸ‡¸", pt: "ðŸ‡§ðŸ‡·", fr: "ðŸ‡«ðŸ‡·" };
      
      switcher.querySelectorAll(".lang-item").forEach((item) => {
        const itemLang = item.getAttribute("data-lang");
        const isActive = itemLang === lang;
        
        if (isActive) {
          // Convert to active span
          if (item.tagName === "A") {
            const span = document.createElement("span");
            span.setAttribute("data-lang", itemLang);
            span.className = "lang-item active inline-flex items-center gap-1 px-2 py-0.5 text-[var(--color-text-secondary)] font-medium border-b border-[var(--color-text-secondary)]";
            span.setAttribute("aria-current", "page");
            span.innerHTML = `<span class="text-sm">${flags[itemLang]}</span><span class="uppercase tracking-wider">${itemLang}</span>`;
            item.replaceWith(span);
          } else {
            item.className = "lang-item active inline-flex items-center gap-1 px-2 py-0.5 text-[var(--color-text-secondary)] font-medium border-b border-[var(--color-text-secondary)]";
            item.setAttribute("aria-current", "page");
          }
        } else {
          // Convert to inactive link
          if (item.tagName === "SPAN") {
            const link = document.createElement("a");
            link.setAttribute("data-lang", itemLang);
            link.href = `?lang=${itemLang}`;
            link.className = "lang-item inline-flex items-center gap-1 px-2 py-0.5 transition-colors text-[var(--color-text-muted)] hover:text-[var(--color-text-secondary)] hover:border-b hover:border-[var(--color-border-subtle)]";
            link.innerHTML = `<span class="text-sm">${flags[itemLang]}</span><span class="uppercase tracking-wider">${itemLang}</span>`;
            item.replaceWith(link);
          } else {
            item.className = "lang-item inline-flex items-center gap-1 px-2 py-0.5 transition-colors text-[var(--color-text-muted)] hover:text-[var(--color-text-secondary)] hover:border-b hover:border-[var(--color-border-subtle)]";
            item.removeAttribute("aria-current");
          }
        }
      });
    }
  }
  
  const currentLang = detectLanguage();
  updatePage(currentLang);
  
  // Language switcher - must be before skills search to avoid conflicts
  document.querySelectorAll('a[href^="?lang="]').forEach((link) => {
    link.addEventListener("click", (e) => {
      e.preventDefault();
      const url = new URL(link.getAttribute("href"), window.location.href);
      const lang = url.searchParams.get("lang");
      if (lang) {
        localStorage.setItem("lang", lang);
        window.location.reload();
      }
    });
  });
  
  // Skills search functionality
  const skillsSearchInput = document.getElementById("skills-search");
  const skillsContainer = document.getElementById("skills-container");
  const skillsSection = document.getElementById("skills");
  const skillsNoResults = document.getElementById("skills-no-results");
  
  // Initialize placeholder based on screen size
  if (skillsSearchInput) {
    const updatePlaceholder = () => {
      const t = translations[currentLang];
      if (!t) return;
      const isMobile = window.innerWidth < 640;
      const mobileKey = skillsSearchInput.getAttribute("data-i18n-mobile");
      const desktopKey = skillsSearchInput.getAttribute("data-i18n");
      
      if (isMobile && mobileKey) {
        const mobileKeys = mobileKey.split(".");
        let mobileValue = t;
        for (const k of mobileKeys) {
          mobileValue = mobileValue?.[k];
        }
        if (mobileValue !== undefined) {
          skillsSearchInput.placeholder = mobileValue;
          return;
        }
      }
      
      if (desktopKey) {
        const keys = desktopKey.split(".");
        let value = t;
        for (const k of keys) {
          value = value?.[k];
        }
        if (value !== undefined) {
          skillsSearchInput.placeholder = value;
        }
      }
    };
    
    updatePlaceholder();
    
    let resizeTimeout;
    window.addEventListener("resize", () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(updatePlaceholder, 100);
    });
  }
  
  if (skillsSearchInput && skillsContainer) {
    let scrollTimeout;
    skillsSearchInput.addEventListener("input", (e) => {
      const query = e.target.value.toLowerCase().trim();
      const skillBadges = skillsContainer.querySelectorAll(".skill-badge");
      let hasVisibleSkills = false;
      
      skillBadges.forEach((badge) => {
        const skillName = badge.getAttribute("data-skill-name") || "";
        const keywords = badge.getAttribute("data-skill-keywords") || "";
        const searchText = `${skillName} ${keywords}`;
        const shouldShow = query === "" || searchText.includes(query);
        badge.style.display = shouldShow ? "" : "none";
        if (shouldShow) hasVisibleSkills = true;
      });
      
      // Disclaimer is always visible - no need to show/hide
      
      // Scroll to skills section when user starts typing and there are visible skills
      if (query.length > 0 && hasVisibleSkills && skillsSection) {
        clearTimeout(scrollTimeout);
        scrollTimeout = setTimeout(() => {
          skillsSection.scrollIntoView({ behavior: "smooth", block: "start" });
        }, 300);
      }
    });
  }
</script>
